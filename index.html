<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Solar Calculator</title>

<!-- SIMPLE PASSWORD -->
<script>
(function(){
  if(sessionStorage.getItem("auth")!=="yes"){
    const p=prompt("Enter password");
    if(p==="solar@123"){sessionStorage.setItem("auth","yes");}
    else{alert("Wrong password");location.reload();}
  }
})();
</script>

<style>
body{margin:0;font-family:Arial;background:#f4f6f8}
.hidden{display:none}

/* HEADER */
.header{display:flex;align-items:center;gap:10px;background:#111;color:#fff;padding:12px}
.header img{height:36px}
.header h1{font-size:16px;margin:0}

/* LAYOUT */
.container{display:flex;min-height:calc(100vh - 60px)}
.sidebar{width:180px;background:#222;display:flex;flex-direction:column}
.sidebar button{padding:14px;border:none;background:#222;color:#fff;text-align:left}
.sidebar button.active{background:#007bff}
.content{flex:1;padding:15px}
.box{background:#fff;padding:15px;border-radius:8px}

/* SECTION TITLES */
.level-title{font-size:13px;font-weight:bold;color:#555;margin:12px 0 6px}

/* TABLE TYPE (BLUE) */
.tabs-table{display:flex;gap:8px;margin-bottom:10px}
.tabs-table button{
  flex:1;padding:12px;border:none;border-radius:8px;
  background:#dbe9ff;font-weight:bold
}
.tabs-table button.active{background:#007bff;color:#fff}

/* CATEGORY TYPE (GREEN) */
.tabs-category{display:flex;gap:8px;margin-bottom:10px}
.tabs-category button{
  flex:1;padding:10px;border:none;border-radius:8px;
  background:#dff5e6;font-weight:bold
}
.tabs-category button.active{background:#28a745;color:#fff}

/* MODE */
.tabs-mode{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:10px}
.tabs-mode button{
  padding:8px 10px;border:1px solid #ccc;border-radius:6px;background:#fff
}
.tabs-mode button.active{background:#222;color:#fff;border-color:#222}

input,select,button.calc{width:100%;padding:10px;margin:6px 0}
.output{margin-top:10px;font-size:14px}

.footer{text-align:center;font-size:12px;color:#666;padding:10px}

@media(max-width:768px){
  .container{flex-direction:column}
  .sidebar{flex-direction:row;width:100%}
  .sidebar button{flex:1;text-align:center}
}
</style>
</head>

<body>

<div class="header">
  <img src="IMG_4454.jpeg">
  <h1>Amararaja Solar Infra (Nagalooty)</h1>
</div>

<div class="container">

<!-- SIDEBAR -->
<div class="sidebar">
  <button class="active" onclick="showTab('mms',this)">MMS</button>
  <button onclick="showTab('piling',this)">Piling</button>
  <button onclick="showTab('module',this)">Module</button>
</div>

<div class="content">

<!-- ================= MMS ================= -->
<div id="mms" class="box">

  <div class="level-title">TABLE TYPE</div>
  <div class="tabs-table">
    <button class="active" onclick="setTable('full',this)">Full Table</button>
    <button onclick="setTable('half',this)">Half Table</button>
  </div>

  <div class="level-title">CATEGORY</div>
  <div class="tabs-category">
    <button class="active" onclick="setCategory('material',this)">Material</button>
    <button onclick="setCategory('fastener',this)">Fasteners</button>
  </div>

  <div class="level-title">CALCULATION TYPE</div>
  <div class="tabs-mode" id="modeTabs"></div>

  <div id="inputs"></div>
  <button class="calc" onclick="calculate()">Calculate</button>
  <div id="result" class="output"></div>
</div>

<!-- ================= PILING ================= -->
<div id="piling" class="box hidden">
  <div class="level-title">TABLE TYPE</div>
  <div class="tabs-table">
    <button class="active" onclick="setPile('full',this)">Full Table</button>
    <button onclick="setPile('half',this)">Half Table</button>
  </div>
  <input id="pileTables" type="number" placeholder="No. of Tables">
  <button class="calc" onclick="calcPiling()">Calculate</button>
  <div id="pileResult" class="output"></div>
</div>

<!-- ================= MODULE ================= -->
<div id="module" class="box hidden">
  <h3>Module Calculator</h3>
  <p>Module calculations can be added here later.</p>
</div>

</div>
</div>

<div class="footer">Internal utility tool • Developed by Sharath Chandra</div>

<script>
const material={
full:{Rafter:12,Purlin:24,Bracing:12},
half:{Rafter:7,Purlin:14,Bracing:7}
};

const fastener={
full:{
"M12×30 NB":24,"M12×30 PV":48,"M12×30 SV":24,
"M10×30 NB":324,"M10×30 PV":472,"M10×30 SV":324,"M10×30 RV":176,
"M8×25 Bolt":232,"M8×25 Nut":232,"M8×25 RV":232
},
half:{
"M12×30 NB":14,"M12×30 PV":28,"M12×30 SV":14,
"M10×30 NB":176,"M10×30 PV":264,"M10×30 SV":176,"M10×30 RV":88,
"M8×25 Bolt":120,"M8×25 Nut":120,"M8×25 RV":120
}
};

let tableType="full",category="material",mode="t2m";

/* NAV */
function showTab(id,btn){
  document.querySelectorAll(".sidebar button").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
  document.querySelectorAll(".box").forEach(b=>b.classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");
}

/* MMS */
function setTable(t,btn){
  tableType=t;
  btn.parentElement.querySelectorAll("button").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
}
function setCategory(c,btn){
  category=c;
  btn.parentElement.querySelectorAll("button").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
  renderModes();
}

function renderModes(){
  const m=document.getElementById("modeTabs");
  m.innerHTML="";
  if(category==="material"){
    m.innerHTML=`
      <button class="active" onclick="setMode('t2m',this)">Table → Material</button>
      <button onclick="setMode('m2t',this)">Material → Table</button>`;
    mode="t2m";
  }else{
    m.innerHTML=`
      <button class="active" onclick="setMode('t2f',this)">Table → Fasteners</button>
      <button onclick="setMode('f2t',this)">Fasteners → Table</button>`;
    mode="t2f";
  }
  renderInputs();
}

function setMode(mo,btn){
  mode=mo;
  btn.parentElement.querySelectorAll("button").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
  renderInputs();
}

function renderInputs(){
  const d=document.getElementById("inputs");
  if(mode.startsWith("t")){
    d.innerHTML=`<input id="qty" type="number" placeholder="No. of Tables">`;
  }else{
    const src=category==="material"?material:fastener;
    let opt="";
    for(let k in src[tableType])opt+=`<option>${k}</option>`;
    d.innerHTML=`<select id="item">${opt}</select>
                 <input id="qty" type="number" placeholder="Quantity">`;
  }
}

function calculate(){
  const q=+qty.value;if(!q)return alert("Enter value");
  let out="";
  if(mode==="t2m")for(let k in material[tableType])out+=`${k}: ${material[tableType][k]*q}<br>`;
  if(mode==="m2t")out="Tables possible: "+Math.floor(q/material[tableType][item.value]);
  if(mode==="t2f")for(let k in fastener[tableType])out+=`${k}: ${fastener[tableType][k]*q}<br>`;
  if(mode==="f2t")out="Tables possible: "+Math.floor(q/fastener[tableType][item.value]);
  result.innerHTML=out;
}

/* PILING */
let pileType="full";
function setPile(t,btn){
  pileType=t;
  btn.parentElement.querySelectorAll("button").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
}
function calcPiling(){
  const n=+pileTables.value;if(!n)return alert("Enter tables");
  pileResult.innerHTML="Column Posts Required: "+(n*(pileType==="full"?12:7));
}

renderModes();
</script>

</body>
</html>

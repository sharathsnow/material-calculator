<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Solar Material Calculator</title>

<style>
body{margin:0;font-family:Arial,sans-serif;background:#f4f6f8}

/* ================= PASSWORD PAGE ================= */
#loginScreen{
  height:100vh;display:flex;justify-content:center;align-items:center;
  background:linear-gradient(135deg,#111,#333);
}
.login-box{
  background:#fff;padding:25px;width:300px;border-radius:10px;
  text-align:center;box-shadow:0 8px 20px rgba(0,0,0,.4)
}
.login-box input,.login-box button{
  width:100%;padding:12px;margin-top:12px;font-size:15px
}
.login-box button{
  background:#007bff;color:#fff;border:none;border-radius:8px;font-weight:bold
}
.login-error{color:#c62828;font-size:13px;display:none}

/* ================= APP UI ================= */
#app{display:none}

/* HEADER */
.header{
  display:flex;align-items:center;gap:10px;
  background:#111;color:#fff;padding:12px
}
.header img{height:36px}
.header h1{font-size:16px;margin:0;flex:1}

/* INFO ICON */
.info-icon{
  width:26px;height:26px;border-radius:50%;
  background:#fff;color:#111;font-weight:bold;
  display:flex;align-items:center;justify-content:center;cursor:pointer
}

/* INFO POPUP */
.info-popup{
  position:fixed;top:60px;right:12px;background:#fff;
  padding:14px;width:260px;border-radius:8px;
  box-shadow:0 6px 16px rgba(0,0,0,.3);
  font-size:13px;display:none;z-index:999
}

/* LAYOUT */
.container{display:flex;min-height:calc(100vh - 60px)}
.sidebar{width:160px;background:#222;display:flex;flex-direction:column}
.sidebar button{
  padding:14px;border:none;background:#222;color:#fff;
  text-align:left;cursor:pointer
}
.sidebar button.active{background:#007bff}
.content{flex:1;padding:15px}

.box{background:#fff;padding:15px;border-radius:8px}
.tabs,.subtabs{display:flex;gap:10px;margin-bottom:10px;flex-wrap:wrap}

button.table-btn{
  padding:10px;border:none;border-radius:6px;
  background:#e0e0e0;cursor:pointer
}
button.table-btn.active{background:#1976d2;color:#fff}

button.mode-btn{
  padding:10px;border:none;border-radius:6px;
  background:#c8e6c9;cursor:pointer
}
button.mode-btn.active{background:#2e7d32;color:#fff}

button.calculate-btn{
  background:linear-gradient(135deg,#007bff,#0056b3);
  color:#fff;padding:12px;border:none;border-radius:8px;
  font-size:15px;font-weight:bold;cursor:pointer;
  width:100%;margin-top:8px
}

.hidden{display:none}
input,select{width:100%;padding:10px;margin:8px 0}
.output{margin-top:10px}

.footer{text-align:center;font-size:12px;color:#666;padding:10px}

@media(max-width:768px){
  .container{flex-direction:column}
  .sidebar{flex-direction:row;width:100%}
  .sidebar button{flex:1;text-align:center}
}
</style>
</head>

<body>

<!-- PASSWORD -->
<div id="loginScreen">
  <div class="login-box">
    <h3>Solar Material Calculator</h3>
    <input type="password" id="passwordInput" placeholder="Enter Password">
    <button onclick="checkPassword()">Enter</button>
    <div id="loginError" class="login-error">Incorrect password</div>
  </div>
</div>

<!-- APP -->
<div id="app">

<div class="header">
  <img src="IMG_4454.jpeg">
  <h1>Amararaja Solar Infra (Nagalooty)</h1>
  <div class="info-icon" onclick="toggleInfo()">i</div>
</div>

<div class="info-popup" id="info">
<b>Internal Utility Tool</b><br><br>
For easy site engineering calculations.<br><br>
Developed by <b>Sharath Chandra</b><br>
Version: v1.4<br>
Last Updated: 08-Jan-2026
</div>

<div class="container">

<div class="sidebar">
  <button class="active" onclick="showSection('mms',this)">MMS</button>
  <button onclick="showSection('piling',this)">Piling</button>
  <button onclick="showSection('module',this)">Module</button>
</div>

<div class="content">

<!-- MMS (UNCHANGED) -->
<div id="mms" class="box">
  <div class="tabs">
    <button class="table-btn active" onclick="setMMSTable('full',this)">Full Table</button>
    <button class="table-btn" onclick="setMMSTable('half',this)">Half Table</button>
  </div>

  <div class="subtabs">
    <button class="mode-btn active" onclick="showMMS('t2m',this)">Table → Material</button>
    <button class="mode-btn" onclick="showMMS('m2t',this)">Material → Table</button>
    <button class="mode-btn" onclick="showMMS('t2f',this)">Table → Fasteners</button>
    <button class="mode-btn" onclick="showMMS('f2t',this)">Fasteners → Table</button>
  </div>

  <div id="t2m">
    <input id="mmsTables" type="number" placeholder="No. of Tables">
    <button class="calculate-btn" onclick="calcMaterial()">Calculate</button>
    <div id="mmsResult"></div>
  </div>

  <div id="m2t" class="hidden">
    <select id="matType"></select>
    <input id="matQty" type="number" placeholder="Material Quantity">
    <button class="calculate-btn" onclick="materialToTable()">Calculate</button>
    <div id="mmsResult2"></div>
  </div>

  <div id="t2f" class="hidden">
    <input id="fasTables" type="number" placeholder="No. of Tables">
    <button class="calculate-btn" onclick="calcFasteners()">Calculate</button>
    <div id="fasResult"></div>
  </div>

  <div id="f2t" class="hidden">
    <select id="fasType"></select>
    <input id="fasQty" type="number" placeholder="Fastener Quantity">
    <button class="calculate-btn" onclick="fastenerToTable()">Calculate</button>
    <div id="fasResult2"></div>
  </div>
</div>

<!-- PILING (UNCHANGED) -->
<div id="piling" class="box hidden">
  <input id="pileTables" type="number" placeholder="No. of Tables">
  <button class="calculate-btn" onclick="calcPiling()">Calculate</button>
  <div id="pileResult"></div>
</div>

<!-- MODULE (NEW FEATURE ADDED) -->
<div id="module" class="box hidden">
  <h3>Module → Pallet Calculator</h3>

  <input id="fullTables" type="number" placeholder="No. of Full Tables">
  <input id="halfTables" type="number" placeholder="No. of Half Tables">

  <button class="calculate-btn" onclick="calcMixedModules()">Calculate</button>

  <div id="moduleResult" class="output"></div>
</div>

</div>
</div>

<div class="footer">
Internal utility tool • Developed by Sharath Chandra
</div>

</div>

<script>
function checkPassword(){
  if(passwordInput.value==="solar@123"){
    loginScreen.style.display="none";
    app.style.display="block";
  }else loginError.style.display="block";
}

/* INFO */
function toggleInfo(){
  info.style.display=info.style.display==="block"?"none":"block";
}
document.addEventListener("click",e=>{
  if(!e.target.closest(".info-popup")&&!e.target.closest(".info-icon")){
    info.style.display="none";
  }
});

/* NAV */
function showSection(id,btn){
  document.querySelectorAll(".sidebar button").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
  document.querySelectorAll(".box").forEach(b=>b.classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");
}

/* MODULE CALC */
function calcMixedModules(){
  const full = +fullTables.value || 0;
  const half = +halfTables.value || 0;

  if(!full && !half){
    alert("Enter table count");
    return;
  }

  // Full table calculation
  const fullPallets = full * 2;
  let leftoverModules = full * 8;

  // Half table requirement
  let halfModulesNeeded = half * 29;

  // Use leftover modules first
  if(leftoverModules >= halfModulesNeeded){
    leftoverModules = leftoverModules - halfModulesNeeded;
    halfModulesNeeded = 0;
  } else {
    halfModulesNeeded -= leftoverModules;
    leftoverModules = 0;
  }

  // Extra pallets for remaining half tables
  let extraPallets = 0;
  if(halfModulesNeeded > 0){
    extraPallets = Math.ceil(halfModulesNeeded / 33);
    leftoverModules = (extraPallets * 33) - halfModulesNeeded;
  }

  const totalPallets = fullPallets + extraPallets;

  moduleResult.innerHTML = `
    Full Tables: ${full}<br>
    Half Tables: ${half}<br><br>

    <b>Total Pallets Required:</b> ${totalPallets}<br>
    <b>Modules Leftover:</b> ${leftoverModules}
  `;
}
</script>

</body>
</html>

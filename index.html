<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Solar Material Calculator</title>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#f4f6f8;
}

/* HEADER */
.header{
  display:flex;
  align-items:center;
  gap:10px;
  background:#111;
  color:#fff;
  padding:12px;
}
.header img{height:36px}
.header h1{font-size:16px;margin:0;flex:1}

/* INFO ICON */
.info-icon{
  width:26px;height:26px;
  border-radius:50%;
  background:#fff;
  color:#111;
  font-weight:bold;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
}

/* INFO POPUP */
.info-popup{
  position:fixed;
  top:60px;
  right:12px;
  background:#fff;
  padding:14px;
  width:260px;
  border-radius:8px;
  box-shadow:0 6px 16px rgba(0,0,0,.3);
  font-size:13px;
  display:none;
  z-index:999;
}

/* LAYOUT */
.container{
  display:flex;
  min-height:calc(100vh - 60px);
}

/* SIDEBAR */
.sidebar{
  width:160px;
  background:#222;
  display:flex;
  flex-direction:column;
}
.sidebar button{
  padding:14px;
  border:none;
  background:#222;
  color:#fff;
  text-align:left;
  cursor:pointer;
}
.sidebar button.active{background:#007bff}

/* CONTENT */
.content{flex:1;padding:15px}

.box{background:#fff;padding:15px;border-radius:8px}
.tabs,.subtabs{display:flex;gap:10px;margin-bottom:10px;flex-wrap:wrap}
button.tab{
  padding:10px;
  border:none;
  border-radius:6px;
  cursor:pointer;
}
button.tab.active{background:#007bff;color:#fff}
.hidden{display:none}
input,select{width:100%;padding:10px;margin:8px 0}
.output{margin-top:10px}

/* FOOTER */
.footer{
  text-align:center;
  font-size:12px;
  color:#666;
  padding:10px;
}

/* MOBILE */
@media(max-width:768px){
  .container{flex-direction:column}
  .sidebar{flex-direction:row;width:100%}
  .sidebar button{flex:1;text-align:center}
}
</style>
</head>

<body>

<!-- HEADER -->
<div class="header">
  <img src="IMG_4454.jpeg">
  <h1>Amararaja Solar Infra (Nagalooty)</h1>
  <div class="info-icon" onclick="toggleInfo()">i</div>
</div>

<!-- INFO POPUP -->
<div id="infoPopup" class="info-popup">
<b>Internal Utility Tool</b><br><br>
For site engineers only.<br>
Not an official application.<br><br>
<b>Developed by:</b> Sharath Chandra
</div>

<div class="container">

<!-- SIDEBAR -->
<div class="sidebar">
  <button class="active" onclick="showSection('mms',this)">MMS</button>
  <button onclick="showSection('piling',this)">Piling</button>
  <button onclick="showSection('module',this)">Module</button>
</div>

<!-- CONTENT -->
<div class="content">

<!-- MMS -->
<div id="mms" class="box">
  <div class="tabs">
    <button class="tab active" onclick="setMMSTable('full',this)">Full Table</button>
    <button class="tab" onclick="setMMSTable('half',this)">Half Table</button>
  </div>

  <div class="subtabs">
    <button class="tab active" onclick="showMMS('t2m',this)">Table → Material</button>
    <button class="tab" onclick="showMMS('m2t',this)">Material → Table</button>
  </div>

  <div id="t2m">
    <input id="mmsTables" type="number" placeholder="No. of Tables">
    <button onclick="calcMaterial()">Calculate</button>
    <div id="mmsResult" class="output"></div>
  </div>

  <div id="m2t" class="hidden">
    <select id="matType"></select>
    <input id="matQty" type="number" placeholder="Material Quantity">
    <button onclick="materialToTable()">Calculate</button>
    <div id="mmsResult2" class="output"></div>
  </div>
</div>

<!-- PILING -->
<div id="piling" class="box hidden">
  <div class="tabs">
    <button class="tab active" onclick="setPile('full',this)">Full Table</button>
    <button class="tab" onclick="setPile('half',this)">Half Table</button>
  </div>

  <input id="pileTables" type="number" placeholder="No. of Tables">
  <button onclick="calcPiling()">Calculate</button>
  <div id="pileResult" class="output"></div>
</div>

<!-- MODULE -->
<div id="module" class="box hidden">
  <p>Module calculations can be added here.</p>
</div>

</div>
</div>

<div class="footer">
Internal utility tool • Developed by Sharath Chandra
</div>

<script>
/* INFO */
function toggleInfo(){
  const p=document.getElementById("infoPopup");
  p.style.display=p.style.display==="block"?"none":"block";
}
document.addEventListener("click",e=>{
  if(!e.target.closest(".info-icon")&&!e.target.closest(".info-popup"))
    document.getElementById("infoPopup").style.display="none";
});

/* SIDEBAR */
function showSection(id,btn){
  document.querySelectorAll(".sidebar button").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
  document.querySelectorAll(".box").forEach(b=>b.classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");
}

/* MMS LOGIC */
let mmsType="full";
const material={
  full:{Rafter:12,Purlins:24,Bracing:12},
  half:{Rafter:7,Purlins:14,Bracing:7}
};

function setMMSTable(t,btn){
  mmsType=t;
  btn.parentElement.querySelectorAll("button").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
  loadMaterials();
}

function showMMS(id,btn){
  btn.parentElement.querySelectorAll("button").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
  document.getElementById("t2m").classList.toggle("hidden",id!=="t2m");
  document.getElementById("m2t").classList.toggle("hidden",id!=="m2t");
}

function loadMaterials(){
  const s=document.getElementById("matType");
  s.innerHTML="";
  for(let k in material[mmsType]){
    s.innerHTML+=`<option value="${k}">${k}</option>`;
  }
}
loadMaterials();

function calcMaterial(){
  const n=+document.getElementById("mmsTables").value;
  if(!n) return alert("Enter tables");
  let out="";
  for(let k in material[mmsType]){
    out+=`${k}: ${material[mmsType][k]*n}<br>`;
  }
  document.getElementById("mmsResult").innerHTML=out;
}

function materialToTable(){
  const qty=+document.getElementById("matQty").value;
  const type=document.getElementById("matType").value;
  if(!qty) return alert("Enter quantity");
  document.getElementById("mmsResult2").innerHTML=
    "Tables possible: "+Math.floor(qty/material[mmsType][type]);
}

/* PILING */
let pileType="full";
function setPile(t,btn){
  pileType=t;
  btn.parentElement.querySelectorAll("button").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
}

function calcPiling(){
  const n=+document.getElementById("pileTables").value;
  if(!n) return alert("Enter tables");
  const posts=pileType==="full"?12:7;
  document.getElementById("pileResult").innerHTML=
    "Column Posts Required: "+(n*posts);
}
</script>

</body>
</html>
